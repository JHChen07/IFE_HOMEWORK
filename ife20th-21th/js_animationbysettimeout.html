<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Use javascript to make animation</title>
    <script src="../js/event.js"></script>
</head>
<body>
<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade-btn">淡出</button>
<script>
    var fade_obj = document.getElementById("fade-obj");
    var fade_btn = document.getElementById("fade-btn");
    var t;
    var x;
    var op;
    fade_obj.style.opacity = "1";


    //按钮不起作用
    var fadeOut = function () {
        op = parseFloat(fade_obj.style.opacity);

        if (op == 1) {
            fade_btn.disable = false;
        } else fade_btn.disabled = true;

        console.log(fade_obj.style.opacity);

        if (op > 0) {
            fade_obj.style.opacity = (op - 0.1).toString();
            t = setTimeout("fadeOut()", 1000);
        } else if (op == 0) {
            clearTimeout(t);
            fade_btn.innerHTML = "淡入";
            fadeIn();
        }
    }

    var fadeIn = function () {
        if (op == 0) {
            fade_btn.disable = false;
        } else fade_btn.disabled = true;

        console.log(fade_obj.style.opacity);
        op = parseFloat(fade_obj.style.opacity);
        if (fade_btn.click) {
            x = setTimeout(function () {
                fade_obj.style.opacity = (op + 0.1).toString();
                if (fade_obj.style.opacity == 1) {
                    clearTimeout(x);
                    fade_btn.innerHTML = "淡出";
                }
            }, 1000);
        }
    }

    EventUtil.addHandlers(fade_btn, "click", fadeOut);
    EventUtil.addHandlers(fade_btn, "click", fadeIn);

</script>
</body>
</html>